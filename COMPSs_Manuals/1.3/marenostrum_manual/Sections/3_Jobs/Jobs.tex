\section{COMPSs Jobs}
\label{sec:Jobs}

\subsection{Submiting COMPSs jobs}
COMPSs jobs can be easily submited by running the \textbf{enqueue\_compss} command. This command allows to configure any 
\textbf{runcompss} option and some particular queue options such as the queue system, the number of nodes, the wallclock time,
the master working directory, the workers working directory and number of tasks per node.

Next, we provide detailed information about the \textit{enqueue\_compss} command:
\begin{lstlisting}[language=bash]
$ enqueue_compss --help
Usage: /apps/COMPSs/1.3/Runtime/scripts/user/enqueue_compss 
         [queue_system_options] [COMPSs_options] 
         application_name application_arguments

* Options:
  General:
    --help, -h                              Print this help message
  
  Queue system configuration:
    - -exec_time=<minutes>                  Expected execution time of 
                                            the application (in minutes)
                                            Default: 10
                                            
    - -num_nodes=<int>                      Number of nodes to use
                                            Default: 2
                                            
    - -queue_system=<name>                  Queue system to use: lsf | pbs | slurm
                                            Default: lsf
                                            
    - -tasks_per_node=<int>                 Maximum number of simultaneous
                                            tasks running on a node
                                            Default: 16
                                            
    - -master_working_dir=<path>            Working directory of the application
                                            Default: .
                                            
    - -worker_working_dir=<name>            Worker directory. Use: scratch | gpfs
                                            Default: scratch
                                            
    - -tasks_in_master=<int>                Maximum number of tasks that the master
                                            node can run as worker. Cannot exceed 
                                            tasks_per_node.
                                            Default: 0
                                            
    - -network=<name>                       Communication network for transfers:
                                            default | infiniband | data.
                                            Default: default
                                            
  Runcompss catched parameters:

    - -log_level=<level>, - -debug          Set the debug level: off | info | debug
                                            Default: off
                                            
    - -tracing=<true|false>                 Enable tracing: true | false
                                            Default: false
                                            
    - -comm=<path>                          Class that implements the adaptor for 
                                            communications
                                            Default: integratedtoolkit.nio.master
                                            .NIOAdaptor
                                            
    - -library_path=<path>                  Non-standard directories to search for 
                                            libraries (e.g. Java JVM library, Python
                                            library, C binding library) 
                                            Default: .
                                            
    - -classpath=<path>                     Path for the application classes / modules
                                            Default: .
  Runcompss delegated parameters:
                                            
  Runtime configuration options:
    - -project=<path>                       Path to the project XML file
                                            Default: /opt/COMPSs/Runtime/configuration/
                                            xml/projects/project.xml
                                            
    - -resources=<path>                     Path to the resources XML file
                                            Default: /opt/COMPSs/Runtime/configuration/
                                            xml/resources/resources.xml
                                            
    - -lang=<name>                          Language of the application (java/c/python)
                                            Default: java
                                            
    - -log_level=<level>, - -debug, -d      Set the debug level: off | info | debug
                                            Default: off

  Tools enablers:
    - -graph=<bool>, - -graph, -g           Generation of the complete graph (true/false)
                                            When no value is provided it is set to true
                                            Default: false
                                            
    - -tracing=<bool>, - -tracing, -t       Generation of traces (true/false)
                                            When no value is provided it is set to true
                                            Default: false
                                            
    - -monitoring=<int>, - -monitoring, -m  Period between monitoring samples 
                                            (milliseconds) When no value is provided it 
                                            is set to 2000
                                            Default: 0

  Advanced options:
    - -comm=<path>                          Class that implements the adaptor for 
                                            communications
                                            Default: integratedtoolkit.nio.master.
                                            NIOAdaptor
                                            
    - -library_path=<path>                  Non-standard directories to search for 
                                            libraries (e.g. Java JVM library, Python 
                                            library, C binding library) 
                                            Default: .
                                            
    - -classpath=<path>                     Path for the application classes / modules
                                            Default: .
                                            
    - -task_count=<int>                     Only for C/Python Bindings. 
                                            Maximum number of different functions/methods
                                            invoked from the application that have been 
                                            selected as tasks
                                            Default: 50
                                            
    - -uuid=<int>                           Preset an application UUID
                                            Default: Automatic random Jobs.texgeneration

* Application name:
    For Java applications:   Fully qualified name of the application
    For C applications:      Path to the master binary
    For Python applications: Path to the .py file containing the main program
    
* Application arguments:
    Command line arguments to pass to the application. Can be empty. 
                                            
\end{lstlisting}

\subsection{Tracking COMPSs jobs}
When submitting a COMPSs job a temporal file will be created storing the job information. For example:
\begin{lstlisting}[language=bash]
$ enqueue_compss \
  --exec_time=15 \
  --num_nodes=3 \
  --queue_system=lsf \
  --tasks_per_node=16 \
  --master_working_dir=. \
  --worker_working_dir=gpfs \
  --lang=python \
  --log_level=debug \
  <APP> <APP_PARAMETERS>
  
Num Nodes:      3
Tasks per Node: 16
Tasks in Master:0
Master WD:      .
Worker WD:      gpfs
Exec-Time:      00:15
Network:        default
Library Path:   .
To COMPSs:      --lang=python --log_level=debug <APP> <APP_PARAMETERS>
Temp submit script is: /scratch/tmp/tmp.YPQKths559

$ cat /scratch/tmp/tmp.YPQKths559
#!/bin/bash
#
#BSUB -cwd . 
#BSUB -oo compss_3_%J.out
#BSUB -eo compss_3_%J.err
#BSUB -n 3
#BSUB -R"span[ptile=1]" 
#BSUB -J COMPSs
#BSUB -W 00:15 
...
\end{lstlisting}

In order to trac the jobs state users can run the following command:
\begin{lstlisting}[language=bash]
$ bjobs
JOBID  USER   STAT  QUEUE  FROM_HOST  EXEC_HOST  JOB_NAME  SUBMIT_TIME
XXXX   bscXX  PEND  XX     login1     XX         COMPSs    Month Day Hour
\end{lstlisting}

The specific COMPSs logs are stored under the \textit{~/.COMPSs/} folder; saved as a local \textit{runcompss} execution. For further 
details please check \textit{COMPSs User Manual: Application Execution} available at our webpage \url{http://compss.bsc.es} .
