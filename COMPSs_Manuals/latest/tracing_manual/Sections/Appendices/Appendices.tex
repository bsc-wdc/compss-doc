\section{PAPI: Hardware Counters}
\label{sec:papi}

The applications instrumentation supports hardware counters through the performance API (PAPI). In order to use it, PAPI needs to be present on the machine before installing
COMPSs. 

During COMPSs installation it is possible to check if PAPI has been detected in the Extrae config report:

\begin{lstlisting}[language=bash]
Package configuration for Extrae 3.3.0 based on extrae/trunk rev. 3966:
-----------------------
Installation prefix: /opt/COMPSs/Dependencies/extrae
Cross compilation: no
...
...
...

Performance counters: yes
  Performance API: PAPI
  PAPI home: /usr
  Sampling support: yes
\end{lstlisting}


PAPI installation and requirements depend on the OS. On Ubuntu 14.04 it is available under textit{papi-tools} package; on OpenSuse textit{papi} and textit{papi-dev}.
For more information check \url{https://icl.cs.utk.edu/projects/papi/wiki/Installing_PAPI}.

Extrae only supports 8 active hardware counters at the same time. Both basic and advanced mode have the same default counters list:

\begin{description}
 \item [PAPI\_TOT\_INS] Instructions completed
 \item [PAPI\_TOT\_CYC] Total cycles
 \item [PAPI\_LD\_INS] Load instructions
 \item [PAPI\_SR\_INS] Store instructions
 \item [PAPI\_BR\_UCN] Unconditional branch instructions
 \item [PAPI\_BR\_CN] Conditional branch instructions
 \item [PAPI\_VEC\_SP] Single precision vector/SIMD instructions
 \item [RESOURCE\_STALLS] Cycles Allocation is stalled due to Resource Related reason
\end{description}

The XML config file contains a secondary set of counters. In order to activate it just change the \textit{starting-set-distribution} from 2 to 1 under the \textit{cpu} tag. The second set provides the following information:

\begin{description}
 \item [PAPI\_TOT\_INS] Instructions completed
 \item [PAPI\_TOT\_CYC] Total cycles
 \item [PAPI\_L1\_DCM] Level 1 data cache misses
 \item [PAPI\_L2\_DCM] Level 2 data cache misses
 \item [PAPI\_L3\_TCM] Level 3 cache misses
 \item [PAPI\_FP\_INS] Floating point instructions
\end{description}


To further customize the tracked counters, modify the XML to suit your needs. To find the available PAPI counters on a given computer issue the command \textit{papi\_avail -a}. For more information about Extrae's XML configuration refer to \url{https://www.bsc.es/computer-sciences/performance-tools/trace-generation/extrae/extrae-user-guide}.

\section{Paraver: configurations}
\label{sec:configs}

A number of \textit{paraver} configurations prepared to view the COMPSs tracing information can be found under \textit{/opt/COMPSs/Dependencies/paraver/cfgs/} folder.


\begin{description}
\item [compss\_runtime.cfg] \hfill \\ runtime events (master, access processor, task dispatcher) and tasks' time running events.
\item [compss\_tasks.cfg] \hfill \\ tasks' running time with function names.
\item [compss\_tasks\_and\_runtime.cfg] \hfill \\ loads both \textit{compss\_tasks.cfg} and \textit{compss\_runtime.cfg}
\item [2dp\_runtime\_state.cfg] \hfill \\ runtime, access processor, task dispatcher and tasks' time running histogram.
\item [compss\_tasks\_numbers.cfg] \hfill \\ tasks IDs and execution time events.
\item [2dp\_tasks.cfg] \hfill \\ tasks' time running and type histogram.
\item [compss\_tasks\_transfers.cfg] \hfill \\ task transfers request (on threads 1.X.1) + \textit{compss\_tasks\_numbers.cfg} events (IDs link request with task).
\item [3dh\_duration\_runtime.cfg] \hfill \\ runtime duration 3D histogram.
\item [Interval\_between\_runtime.cfg] \hfill \\ interval between runtime events.
\item [3dh\_duration\_tasks.cfg] \hfill \\ task's duration 3D histogram.
\item [compss\_data\_transfers.cfg] \hfill \\ data transfers (for each parameter not task) events and communication lines.
\item [thread\_cpu.cfg] \hfill \\ initial executing CPU information.
% \item [time\_btw\_tasks.cfg] \hfill \\ time between tasks information.
\end{description}
